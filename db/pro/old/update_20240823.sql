-- ------------------------------ ----------------------------
-- 需求条目提前超期预警
-- ------------------------------ ----------------------------
INSERT INTO zt_lang (lang, module, `section`, `key`, value, `system`, `order`, extendInfo) VALUES ('zh-cn', 'demand', 'demandOutTime', 'demandToOutReferPlanEnd_1', '20', '1', 0, '');
INSERT INTO zt_lang (lang, module, `section`, `key`, value, `system`, `order`, extendInfo) VALUES ('zh-cn', 'demand', 'demandOutTime', 'demandToOutReferPlanEnd_2', '5', '1', 0, '');
INSERT INTO zt_lang (lang, module, `section`, `key`, value, `system`, `order`, extendInfo) VALUES ('zh-cn', 'demand', 'demandOutTime', 'demandToOutReferPlanEndIsCreateUser', '2', '1', 0, '');
INSERT INTO zt_lang (lang, module, `section`, `key`, value, `system`, `order`, extendInfo) VALUES ('zh-cn', 'demand', 'demandOutTime', 'demandToOutReferPlanEndIsManagerUser', '2', '1', 0, '');

INSERT INTO zt_lang (lang, module, `section`, `key`, value, `system`, `order`, extendInfo) VALUES ('zh-cn', 'problem', 'problemOutTime', 'ToOutByPlannedTime_1', '20', '1', 0, '');
INSERT INTO zt_lang (lang, module, `section`, `key`, value, `system`, `order`, extendInfo) VALUES ('zh-cn', 'problem', 'problemOutTime', 'ToOutByPlannedTime_2', '5', '1', 0, '');
INSERT INTO zt_lang (lang, module, `section`, `key`, value, `system`, `order`, extendInfo) VALUES ('zh-cn', 'problem', 'problemOutTime', 'ToOutByPlannedTimeIsCreateUser', '2', '1', 0, '');
INSERT INTO zt_lang (lang, module, `section`, `key`, value, `system`, `order`, extendInfo) VALUES ('zh-cn', 'problem', 'problemOutTime', 'ToOutByPlannedTimeIsManagerUser', '2', '1', 0, '');

INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '1', ',jiayiming,ningxiang,wanghe');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '2', ',zhoujie,zhujie');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '3', ',wangshanli');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '4', ',tukun,xixinjiang');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '5', ',guomuyi,minyuanli,panxiang');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '6', ',renfei,suliping,wangxingye');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '7', ',guochunlei,guozezhong,zhaoxiaoguang');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '8', ',kongzhaolong,yinjiansong,yuhailing');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '9', ',lidongyue,xiaopeng');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '10', ',libo,liuxiaohu');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '11', ',huangjun,yangjianxu');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '12', ',zhangjingquan,zhouwei');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '14', '');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '15', '');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '16', '');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '17', ',jiangrun,xiekui');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '18', ',jiangrun,xiekui');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '19', ',jiangrun,xiekui');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '20', ',jiangrun,xiekui');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '25', '');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '26', ',wangdi1');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '27', ',wangdi1');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '28', ',wangdi1');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '29', ',wangdi1');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '30', '');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '31', '');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '32', '');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '33', '');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '34', '');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '35', '');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '36', '');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '37', '');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '38', '');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '39', '');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '40', '');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '41', '');
INSERT INTO zt_config ( owner, module, `section`, `key`, value) VALUES ('system', 'problem', 'deptLeadersList', '42', '');

-- ----------------------------
-- 迭代36 问题单新增字段  wangyongliang
-- ----------------------------

ALTER TABLE zt_problem ADD COLUMN `completedPlan` varchar(255)  DEFAULT  NULL COMMENT '是否按计划完成 1：是 2：否',
ADD  column `examinationResult` varchar(255)  DEFAULT  NULL COMMENT '考核结果 ,1：正常 2：延期',
ADD  column `completedPlanFlag` int(4) DEFAULT '2' COMMENT '是否解除联动按计划完成 1：是 2：否',
ADD  column `examinationResultFlag` int(4) DEFAULT '2' COMMENT '是否解除自动更新考核结果 1：是 2：否';

-- ----------------------------
-- 迭代36 需求收集同步需求条目  刘胜杰
-- ----------------------------
ALTER TABLE zt_demand ADD COLUMN `collectionId` varchar(100) DEFAULT '' COMMENT '关联需求收集；多个用逗号拼接';
ALTER TABLE zt_demandcollection ADD COLUMN `demandId` varchar(100) DEFAULT '' COMMENT '关联需求条目';

-- 增加zt_problem 创建时间列
ALTER TABLE `zt_problem` ADD COLUMN `createTime` datetime  DEFAULT CURRENT_TIMESTAMP   COMMENT '创建时间';
-- 同步新建createTime时间为旧的createdDate创建日期
update zt_problem set createTime = date_format(createdDate, '%Y-%m-%d %H:%i:%s');
ALTER TABLE `zt_application` ADD COLUMN `updateTime` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP   COMMENT '更新时间';
update zt_application set updateTime = date_format(createdDate, '%Y-%m-%d %H:%i:%s');
-- 需求按照项目搜索  wangjiurong
CREATE INDEX project USING BTREE ON zt_demand (project);
-- 环境部署工单
CREATE TABLE `zt_environmentorder` (
                                       `id` int(11) NOT NULL AUTO_INCREMENT COMMENT '编号',
                                       `code` varchar(255) DEFAULT NULL COMMENT '单号',
                                       `title` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT '标题',
                                       `priority` tinyint(1) NOT NULL COMMENT '优先级=1:一般,2:紧急,3:非常紧急',
                                       `origin` tinyint(1) NOT NULL COMMENT '需求来源=1:项目,2:二线问题,3:二线需求,4:其他',
                                       `content` text CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL COMMENT '工单内容',
                                       `finallytime` datetime DEFAULT NULL COMMENT '期望完成时间',
                                       `description` varchar(255) DEFAULT NULL COMMENT '需求说明',
                                       `list` json DEFAULT NULL COMMENT '部署信息列表',
                                       `createdBy` char(30) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '' COMMENT '由谁发起',
                                       `reviewer` char(30) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '审核人',
                                       `executor` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '执行人',
                                       `dealUser` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci DEFAULT NULL COMMENT '待处理人',
                                       `status` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci DEFAULT '' COMMENT '状态',
                                       `processInstanceId` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci DEFAULT '' COMMENT '审批流id',
                                       `version` tinyint(4) DEFAULT '1' COMMENT '版本',
                                       `createdTime` datetime NOT NULL COMMENT '创建时间',
                                       `updateTime` datetime DEFAULT CURRENT_TIMESTAMP COMMENT '默认更新时间',
                                       `deleteTime` datetime DEFAULT NULL COMMENT '默认删除时间',
                                       `workHour` json DEFAULT NULL COMMENT '执行人工时',
                                       PRIMARY KEY (`id`),
                                       UNIQUE KEY `code` (`code`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8mb4;
INSERT INTO `zt_config` (`owner`, `module`, `section`, `key`, `value`) VALUES ('system', 'common', 'global', 'environmentorderKey', 'ENVIROWORKORDER');
INSERT INTO `zt_config` (`owner`, `module`, `section`, `key`, `value`) VALUES ('system', 'common', 'global', 'environmentorderId', 'ENVIROWORKORDER:16:34ea9778-5df3-11ef-9427-0242ac110403');
INSERT INTO `zt_config` (`owner`, `module`, `section`, `key`, `value`) VALUES ('system', 'common', 'global', 'environmentorderTempId', '8512599210897113088');
INSERT INTO `zt_config` (`owner`, `module`, `section`, `key`, `value`) VALUES ('system', 'common', 'global', 'setEnvironmentorderMail', '{\"mailTitle\":\"\\u3010\\u5f85\\u529e\\u3011\\u60a8\\u6709\\u4e00\\u4e2a\\u3010%s\\u3011\\u5f85\\u5904\\u7406\\uff0c\\u8bf7\\u53ca\\u65f6\\u767b\\u5f55\\u7814\\u53d1\\u8fc7\\u7a0b\\u7ba1\\u7406\\u5e73\\u53f0\\u8fdb\\u884c\\u5904\\u7406\",\"variables\":[\"\\u73af\\u5883\\u90e8\\u7f72\\u5de5\\u5355\"],\"mailContent\":\"<span style=\\\"font-weight:700;\\\">\\u8bf7\\u8fdb\\u5165\\u3010\\u5730\\u76d8\\u3011-\\u3010\\u5f85\\u5904\\u7406\\u3011-\\u3010\\u5ba1\\u6279\\u3011-\\u3010\\u7cfb\\u7edf\\u90e8\\u7f72\\u5de5\\u5355\\u3011\\u5904\\u7406\\u9879\\u76ee\\u7ed3\\u9879\\u63d0\\u51fa\\u7684\\u6539\\u8fdb\\u610f\\u89c1\\uff0c\\u5177\\u4f53\\u4fe1\\u606f\\u5982\\u4e0b\\uff1a<\\/span>\"}');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'originList', '1', '项目', '1', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'originList', '2', '二线工单', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'originList', '3', '二线需求', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'originList', '4', '其他', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'priorityList', '1', '一般', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'priorityList', '2', '紧急', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'priorityList', '3', '非常紧急', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'reviewerList', 'guanxiaoxiao', '关潇潇', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'reviewerList', 'liuyahui', '刘亚慧', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'executorList', 't_houzijian', 't_侯子健', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'executorList', 't_wangjunfeng', 't_王俊峰', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'executorList', 't_wangzhao', 't_王钊', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'executorList', 't_zhaidong', 't_翟栋', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'executorList', 't_zhangbin', 't_张彬', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'executorList', 't_zhangjian', 't_张剑', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'createByList', 'zhangshuqiang', '张树强', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'createByList', 'aiyingying', '艾莹莹', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'createByList', 'guyanwen', '顾衍文', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'createByList', 'zhaoyanhui', '赵艳辉', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'createByList', 'zhuqianghua', '朱强华', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'createByList', 'zhangruoyu', '张若愚', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'createByList', 'chenchen', '陈晨', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'createByList', 'hehaibo', '何海波', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'createByList', 'liuhong', '刘红', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'createByList', 'yanglei', '杨磊', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'createByList', 'zhoumi', '周密', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'createByList', 'luoruiwen', '罗瑞文', '0', 0, '');
INSERT INTO `zt_lang` (`lang`, `module`, `section`, `key`, `value`, `system`, `order`, `extendInfo`) VALUES ('zh-cn', 'environmentorder', 'createByList', 'admin', 'admin', '0', 0, '');

alter table zt_need_deal_message modify code varchar(1024) null comment '编号';